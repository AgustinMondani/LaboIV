import{u as I}from"./chunk-VFF2UD4S.js";import{a as O}from"./chunk-4VNXVQXX.js";import{d as w}from"./chunk-AKZVERSC.js";import{a as k,c as P}from"./chunk-ETUTCWQS.js";import{a as S}from"./chunk-3O7R6LMN.js";import"./chunk-JHHDI4HL.js";import{$a as v,Ab as y,Ba as x,Cb as j,Fa as _,Ma as f,Oa as a,Pa as r,Qa as M,Ta as C,Ua as u,Va as d,W as g,X as p,Za as o,_a as h,qa as b,sa as s,wa as m}from"./chunk-OBJE3FPQ.js";import"./chunk-LJ5XHLMQ.js";import{h as l}from"./chunk-FK42CRUA.js";function A(c,t){if(c&1){let e=C();a(0,"div",4),M(1,"img",5),a(2,"div",6)(3,"button",7),u("click",function(){g(e);let i=d();return p(i.adivinar(!0))}),o(4,"MAYOR"),r(),a(5,"button",8),u("click",function(){g(e);let i=d();return p(i.adivinar(!1))}),o(6,"MENOR"),r()(),a(7,"p",9),o(8,"Puntaje: "),a(9,"strong"),o(10),r()(),a(11,"p",10),o(12),r(),a(13,"p",11),o(14),r()()}if(c&2){let e=d();s(),f("src",e.cartaActual.image,b),s(9),h(e.puntaje),s(2),v("Cartas restantes: ",e.cartasRestantes,""),s(2),h(e.mensajeResultado)}}var R=class c{constructor(t,e,n,i){this.http=t;this.router=e;this.servicioAuth=n;this.servicioPuntuacion=i}nombreUsuario=null;idMazo="";cartaActual=null;cartaSiguiente=null;puntaje=0;cartasRestantes=52;mensajeResultado="";ordenValores=["2","3","4","5","6","7","8","9","10","JACK","QUEEN","KING","ACE"];juegoFinalizado=!1;ngOnInit(){return l(this,null,function*(){this.nombreUsuario=yield this.servicioAuth.getSessionUser(),this.iniciarJuego()})}iniciarJuego(){this.http.get("https://deckofcardsapi.com/api/deck/new/shuffle/?deck_count=1").subscribe(t=>{this.idMazo=t.deck_id,this.puntaje=0,this.cartasRestantes=52,this.mensajeResultado="",this.juegoFinalizado=!1,this.sacarCartaInicial()})}sacarCartaInicial(){this.http.get(`https://deckofcardsapi.com/api/deck/${this.idMazo}/draw/?count=1`).subscribe(t=>{this.cartaActual=t.cards[0],this.cartasRestantes=t.remaining})}adivinar(t){return l(this,null,function*(){this.juegoFinalizado||this.http.get(`https://deckofcardsapi.com/api/deck/${this.idMazo}/draw/?count=1`).subscribe(e=>l(this,null,function*(){this.cartaSiguiente=e.cards[0],this.cartasRestantes=e.remaining;let n=this.ordenValores.indexOf(this.cartaActual.value),i=this.ordenValores.indexOf(this.cartaSiguiente.value);(t?i>=n:i<=n)?(this.puntaje++,this.mensajeResultado="\xA1Correcto!"):this.mensajeResultado="Fallaste :(",this.cartaActual=this.cartaSiguiente,this.cartaSiguiente=null,this.cartasRestantes===0&&(yield this.finalizarJuego())}))})}finalizarJuego(){return l(this,null,function*(){this.juegoFinalizado=!0;let t=yield this.servicioAuth.getSessionPuntaje(),e=t?.user_metadata?.username??"An\xF3nimo",n=t?.email??"sin@email";try{yield this.servicioPuntuacion.guardarPuntaje(e,n,"Mayor menor",this.puntaje),this.mensajeResultado=`Juego terminado. Puntaje: ${this.puntaje}`}catch(i){this.mensajeResultado="Error al guardar el puntaje.",console.error(i)}})}static \u0275fac=function(e){return new(e||c)(m(k),m(w),m(S),m(O))};static \u0275cmp=x({type:c,selectors:[["app-mayor-menor"]],decls:6,vars:1,consts:[[1,"contenedor-juego"],[1,"titulo-juego"],["class","seccion-juego",4,"ngIf"],[1,"boton","boton-reiniciar",3,"click"],[1,"seccion-juego"],["alt","Carta actual",1,"imagen-carta",3,"src"],[1,"botonera"],[1,"boton","boton-mayor",3,"click"],[1,"boton","boton-menor",3,"click"],[1,"puntaje"],[1,"restantes"],[1,"resultado"]],template:function(e,n){e&1&&(a(0,"div",0)(1,"h2",1),o(2,"Mayor o Menor"),r(),_(3,A,15,4,"div",2),a(4,"button",3),u("click",function(){return n.iniciarJuego()}),o(5,"REINICIAR"),r()()),e&2&&(s(3),f("ngIf",n.cartaActual))},dependencies:[j,y,P,I],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;height:94vh;font-family:Segoe UI,sans-serif;background:linear-gradient(135deg,#0f2027,#203a43,#2c5364);color:#fff}.contenedor-juego[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;background:#ffffff0d;-webkit-backdrop-filter:blur(12px);backdrop-filter:blur(12px);border-radius:1.5rem;padding:2rem;margin:1rem auto;max-width:500px;width:100%;box-shadow:0 0 30px #0006;color:#fff;font-family:Segoe UI,sans-serif;border:1px solid rgba(255,255,255,.1);animation:_ngcontent-%COMP%_fadeIn .5s ease}.titulo-juego[_ngcontent-%COMP%]{font-size:2rem;margin-bottom:1.5rem;text-align:center;color:#00c6ff;text-shadow:0 0 10px rgba(0,198,255,.6)}.seccion-juego[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:1rem}.imagen-carta[_ngcontent-%COMP%]{width:300px;height:auto;border-radius:1rem;box-shadow:0 0 50px #01c6ffcc;transition:transform .3s ease}.botonera[_ngcontent-%COMP%]{display:flex;gap:1.5rem;margin:1rem 0}.boton[_ngcontent-%COMP%]{padding:.8rem 1.5rem;border:none;border-radius:1rem;font-weight:700;cursor:pointer;font-size:1rem;transition:all .3s ease;box-shadow:0 0 10px #00c6ff66;color:#fff;background:linear-gradient(145deg,#00c6ff,#0072ff)}.boton[_ngcontent-%COMP%]:hover{background:linear-gradient(145deg,#009ee0,#05a);transform:scale(1.05)}.boton-mayor[_ngcontent-%COMP%]{background:linear-gradient(145deg,#28a745,#218838)}.boton-menor[_ngcontent-%COMP%]{background:linear-gradient(145deg,#dc3545,#c82333)}.boton-reiniciar[_ngcontent-%COMP%]{margin-top:2rem;background:linear-gradient(145deg,#17a2b8,#138496)}.puntaje[_ngcontent-%COMP%], .restantes[_ngcontent-%COMP%], .resultado[_ngcontent-%COMP%]{font-size:1.1rem;text-shadow:0 0 5px rgba(255,255,255,.2)}.resultado[_ngcontent-%COMP%]{font-size:1.3rem;font-weight:700;margin-top:.5rem;color:gold;text-shadow:0 0 10px rgba(255,215,0,.5)}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:scale(.95)}to{opacity:1;transform:scale(1)}}"]})};export{R as MayorMenorComponent};
