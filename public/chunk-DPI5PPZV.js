import{b as E,d as T,g as F,s as k,u as W}from"./chunk-GN3DSZMQ.js";import{a as V}from"./chunk-B62DE3ON.js";import{a as I}from"./chunk-2QAIXTRJ.js";import"./chunk-JHHDI4HL.js";import{$a as b,Ab as P,Bb as O,Ca as j,Db as M,Ga as g,Na as d,Pa as r,Qa as s,Ua as _,Va as f,W as p,Wa as u,X as m,_a as l,ab as x,bb as S,cb as A,db as w,fb as C,ta as a,xa as h,zb as y}from"./chunk-4LKR36O3.js";import"./chunk-LJ5XHLMQ.js";import{h as v}from"./chunk-FK42CRUA.js";var z=()=>[];function L(o,n){if(o&1&&(r(0,"div",9),l(1),s()),o&2){let e=n.index,i=u().index,t=u();d("ngClass",t.obtenerColor(i,e)),a(),x(" ",t.obtenerLetra(i,e)," ")}}function N(o,n){o&1&&(r(0,"div",7),g(1,L,2,2,"div",8),s()),o&2&&(a(),d("ngForOf",C(1,z).constructor(5)))}function U(o,n){if(o&1){let e=_();r(0,"div",10)(1,"input",11),w("ngModelChange",function(t){p(e);let c=u();return A(c.intentoActual,t)||(c.intentoActual=t),m(t)}),f("keyup.enter",function(){p(e);let t=u();return m(t.enviarIntento())}),s(),r(2,"button",12),f("click",function(){p(e);let t=u();return m(t.enviarIntento())}),l(3,"Enviar"),s()()}if(o&2){let e=u();a(),S("ngModel",e.intentoActual),d("disabled",e.juegoTerminado),a(),d("disabled",e.juegoTerminado)}}function D(o,n){if(o&1){let e=_();r(0,"button",13),f("click",function(){p(e);let t=u();return m(t.reiniciarTodo())}),l(1,"Reiniciar Juego"),s()}}var R=class o{constructor(n,e){this.supabase=n;this.puntuacionService=e}listaPalabras=["PERRO","CASAS","GATOS","LUZES","ARBOL","NIEVE","RATON","PLAZA","FUEGO","AGUAS"];palabrasElegidas=[];palabraSecreta="";intentoActual="";intentos=[];colores=[];maxIntentos=6;juegoTerminado=!1;mensaje="";rondaActual=0;puntaje=0;juegoFinalizado=!1;ngOnInit(){this.iniciarJuego()}iniciarJuego(){this.puntaje=0,this.rondaActual=0,this.juegoFinalizado=!1,this.palabrasElegidas=this.seleccionarPalabrasAleatorias(2),this.prepararRonda()}seleccionarPalabrasAleatorias(n){let e=[...this.listaPalabras],i=[];for(;i.length<n&&e.length>0;){let t=Math.floor(Math.random()*e.length);i.push(e.splice(t,1)[0].toUpperCase())}return i}prepararRonda(){this.palabraSecreta=this.palabrasElegidas[this.rondaActual],this.intentos=[],this.colores=[],this.intentoActual="",this.juegoTerminado=!1,this.mensaje=""}enviarIntento(){let n=this.intentoActual.toUpperCase();if(n.length!==5||this.juegoTerminado||this.juegoFinalizado)return;let e=Array(5).fill("gris"),i=Array(5).fill(!1);for(let t=0;t<5;t++)n[t]===this.palabraSecreta[t]&&(e[t]="verde",i[t]=!0);for(let t=0;t<5;t++)if(e[t]==="gris"){for(let c=0;c<5;c++)if(!i[c]&&n[t]===this.palabraSecreta[c]){e[t]="amarillo",i[c]=!0;break}}this.intentos.push(n),this.colores.push(e),this.intentoActual="",n===this.palabraSecreta?(this.juegoTerminado=!0,this.mensaje="\xA1Correcto!",this.calcularPuntaje()):this.intentos.length>=this.maxIntentos&&(this.juegoTerminado=!0,this.mensaje=`La palabra era: ${this.palabraSecreta}`),this.juegoTerminado&&setTimeout(()=>this.siguienteRonda(),2e3)}calcularPuntaje(){let n=this.intentos.length;n===1?this.puntaje+=6:n===2?this.puntaje+=4:n===3?this.puntaje+=2:this.puntaje+=1}siguienteRonda(){return v(this,null,function*(){if(this.rondaActual++,this.rondaActual<this.palabrasElegidas.length)this.prepararRonda();else{let n=yield this.supabase.getSessionPuntaje(),e=n?.user_metadata?.username??"An\xF3nimo",i=n?.email??"sin@email";yield this.puntuacionService.guardarPuntaje(e,i,"Wordle",this.puntaje),this.juegoFinalizado=!0,this.mensaje=`\xA1Juego terminado! Puntaje final: ${this.puntaje} puntos`}})}reiniciarTodo(){this.iniciarJuego()}obtenerLetra(n,e){return this.intentos[n]?.[e]??""}obtenerColor(n,e){return this.colores[n]?.[e]??"gris"}static \u0275fac=function(e){return new(e||o)(h(I),h(V))};static \u0275cmp=j({type:o,selectors:[["app-wordle"]],decls:13,vars:7,consts:[[1,"titulo"],[1,"tablero"],["class","fila",4,"ngFor","ngForOf"],[1,"puntaje"],["class","acciones",4,"ngIf"],[1,"mensaje"],[3,"click",4,"ngIf"],[1,"fila"],["class","celda",3,"ngClass",4,"ngFor","ngForOf"],[1,"celda",3,"ngClass"],[1,"acciones"],["maxlength","5","placeholder","Adivin\xE1 la palabra",3,"ngModelChange","keyup.enter","ngModel","disabled"],[3,"click","disabled"],[3,"click"]],template:function(e,i){e&1&&(r(0,"h2",0),l(1,"WORDLE"),s(),r(2,"div",1),g(3,N,2,2,"div",2),s(),r(4,"p",3),l(5,"Puntaje: "),r(6,"strong"),l(7),s(),l(8),s(),g(9,U,4,3,"div",4),r(10,"p",5),l(11),s(),g(12,D,2,0,"button",6)),e&2&&(a(3),d("ngForOf",C(6,z).constructor(i.maxIntentos)),a(4),b(i.puntaje),a(),x(" | Ronda ",i.rondaActual+1," / 2"),a(),d("ngIf",!i.juegoFinalizado),a(2),b(i.mensaje),a(),d("ngIf",i.juegoFinalizado))},dependencies:[M,y,P,O,W,E,T,k,F],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;height:94vh;font-family:Segoe UI,sans-serif;background:linear-gradient(135deg,#0f2027,#203a43,#2c5364);color:#fff}.titulo[_ngcontent-%COMP%]{margin-top:5dvh;font-size:2rem;text-align:center;color:#00c6ff;text-shadow:0 0 10px rgba(0,198,255,.6)}.tablero[_ngcontent-%COMP%]{display:grid;grid-template-rows:repeat(6,1fr);gap:20px;margin-top:5dvh;justify-content:center}.fila[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(5,1fr);gap:7px}.puntaje[_ngcontent-%COMP%]{margin:50px auto 0}.celda[_ngcontent-%COMP%]{width:150px;height:70px;border:2px solid #00c6ff;display:flex;align-items:center;justify-content:center;font-size:1.5rem;font-weight:700;text-transform:uppercase}.verde[_ngcontent-%COMP%]{background-color:#6ad064!important;color:#fff}.amarillo[_ngcontent-%COMP%]{background-color:#c9b458!important;color:#fff}.gris[_ngcontent-%COMP%]{background-color:#787c7e!important;color:#fff}.mensaje[_ngcontent-%COMP%]{margin:10px;text-align:center;font-weight:700}.acciones[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;align-items:center;gap:.5rem;margin-top:5dvh}input[_ngcontent-%COMP%]{flex:1;padding:.8rem 1.2rem;border-radius:1rem;border:none;outline:none;background:#ffffff1a;color:#fff;font-size:1rem;box-shadow:inset 0 0 5px #ffffff0d;max-width:650px}button[_ngcontent-%COMP%]{padding:.8rem 1.5rem;border:none;border-radius:1rem;background:linear-gradient(145deg,#00c6ff,#0072ff);color:#fff;font-weight:700;cursor:pointer;transition:all .3s ease;box-shadow:0 0 10px #00c6ff66}"]})};export{R as WordleComponent};
