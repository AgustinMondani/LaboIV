import{u as N}from"./chunk-GN3DSZMQ.js";import{a as F}from"./chunk-B62DE3ON.js";import{a as I}from"./chunk-2QAIXTRJ.js";import"./chunk-JHHDI4HL.js";import{$a as O,Ab as j,Bb as S,Ca as P,Db as k,Ga as m,Na as l,Pa as r,Qa as o,Ra as _,Sa as y,Ta as M,Ua as h,Va as v,W as f,Wa as d,X as g,Y as x,_a as c,ab as b,ta as s,xa as u,zb as w}from"./chunk-4LKR36O3.js";import"./chunk-LJ5XHLMQ.js";import{h as C}from"./chunk-FK42CRUA.js";function E(a,t){a&1&&(y(0),x(),r(1,"svg",11),_(2,"path",12),o(),M())}function z(a,t){a&1&&_(0,"div",13)}function T(a,t){if(a&1){let e=h();r(0,"div",8),v("click",function(){let i=f(e).index,p=d().index,B=d();return g(B.disparar(p,i))}),m(1,E,3,0,"ng-container",9)(2,z,1,0,"div",10),o()}if(a&2){let e=t.$implicit;l("ngClass",e),s(),l("ngIf",e==="hit"),s(),l("ngIf",e==="miss")}}function $(a,t){if(a&1&&(r(0,"div",6),m(1,T,3,3,"div",7),o()),a&2){let e=t.$implicit;s(),l("ngForOf",e)}}function V(a,t){if(a&1){let e=h();r(0,"button",14),v("click",function(){f(e);let i=d();return g(i.reiniciar())}),c(1,"Reiniciar"),o()}}var A=class a{constructor(t,e){this.puntuacionService=t;this.supabase=e}tablero=[];barcos=new Set;intentos=8;aciertos=0;juegoFinalizado=!1;mensaje="";usuario;ngOnInit(){this.iniciarJuego()}iniciarJuego(){for(this.tablero=Array.from({length:6},()=>Array(6).fill("")),this.barcos.clear(),this.intentos=8,this.aciertos=0,this.juegoFinalizado=!1,this.mensaje="";this.barcos.size<7;){let e=Math.floor(Math.random()*6),n=Math.floor(Math.random()*6);this.barcos.add(`${e},${n}`)}let t=Array.from({length:6},(e,n)=>Array.from({length:6},(i,p)=>this.barcos.has(`${n},${p}`)?"\u{1F6A2}":"\u{1F30A}"));console.table(t)}disparar(t,e){if(this.juegoFinalizado||this.tablero[t][e]!=="")return;let n=`${t},${e}`;this.barcos.has(n)?(this.tablero[t][e]="hit",this.aciertos++):(this.tablero[t][e]="miss",this.intentos--);let i=0;this.aciertos===7?(this.juegoFinalizado=!0,i=this.intentos*10+100,this.mensaje=`\xA1Ganaste! Puntaje: ${i}`,this.guardarPuntuacion(i)):this.intentos===0&&(this.juegoFinalizado=!0,i=this.aciertos*5,this.mensaje=`\xA1Perdiste! Puntaje: ${i}`,this.guardarPuntuacion(i))}guardarPuntuacion(t){return C(this,null,function*(){let e=yield this.supabase.getSessionPuntaje(),n=e?.user_metadata?.username??"An\xF3nimo",i=e?.email??"sin@email";yield this.puntuacionService.guardarPuntaje(n,i,"Naval",t)})}reiniciar(){this.iniciarJuego()}static \u0275fac=function(e){return new(e||a)(u(F),u(I))};static \u0275cmp=P({type:a,selectors:[["app-batalla-naval"]],decls:12,vars:5,consts:[[1,"titulo"],[1,"tablero"],["class","fila",4,"ngFor","ngForOf"],[1,"info","juego"],[1,"mensaje"],[3,"click",4,"ngIf"],[1,"fila"],["class","celda",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"celda",3,"click","ngClass"],[4,"ngIf"],["class","splash",4,"ngIf"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 64 64",1,"barco"],["d","M2 44h60L32 12z"],[1,"splash"],[3,"click"]],template:function(e,n){e&1&&(r(0,"h2",0),c(1,"Batalla Naval"),o(),r(2,"div",1),m(3,$,2,1,"div",2),o(),r(4,"div",3)(5,"p"),c(6),o(),r(7,"p"),c(8),o(),r(9,"p",4),c(10),o(),m(11,V,2,0,"button",5),o()),e&2&&(s(3),l("ngForOf",n.tablero),s(3),b("Intentos restantes: ",n.intentos,""),s(2),b("Aciertos: ",n.aciertos,"/7"),s(2),O(n.mensaje),s(),l("ngIf",n.juegoFinalizado))},dependencies:[N,k,w,j,S],styles:['@charset "UTF-8";[_nghost-%COMP%]{display:flex;flex-direction:column;align-items:center;min-height:94vh;font-family:Segoe UI,sans-serif;background:linear-gradient(135deg,#0f2027,#203a43,#2c5364);color:#fff;padding:2rem}.titulo[_ngcontent-%COMP%]{margin-top:2rem;font-size:2rem;text-align:center;color:#00c6ff;text-shadow:0 0 15px rgba(0,198,255,.7)}.tablero[_ngcontent-%COMP%]{display:grid;grid-template-rows:repeat(6,1fr);gap:12px;margin-top:4rem}.fila[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(6,1fr);gap:12px}.celda[_ngcontent-%COMP%]{width:70px;height:70px;border:2px solid #00c6ff;border-radius:12px;background:#ffffff0d;cursor:pointer;display:flex;align-items:center;justify-content:center;position:relative;transition:transform .2s ease,box-shadow .2s ease}.celda[_ngcontent-%COMP%]:hover{transform:scale(1.05);box-shadow:0 0 10px #00c6ff80}.celda.hit[_ngcontent-%COMP%]{background:linear-gradient(145deg,#ff416c,#ff4b2b);animation:_ngcontent-%COMP%_explode .4s ease-out}.celda.miss[_ngcontent-%COMP%]{background:linear-gradient(145deg,#00c6ff,#0072ff);animation:_ngcontent-%COMP%_splashAnim .5s ease-out}@keyframes _ngcontent-%COMP%_explode{0%{transform:scale(.5);opacity:.5}to{transform:scale(1);opacity:1}}.splash[_ngcontent-%COMP%]{width:30px;height:30px;background:#00c6ff99;border-radius:50%;position:absolute;animation:_ngcontent-%COMP%_splashAnim .5s ease-out}@keyframes _ngcontent-%COMP%_splashAnim{0%{transform:scale(.2);opacity:.8}to{transform:scale(1.4);opacity:0}}.barco[_ngcontent-%COMP%]{width:35px;height:35px;fill:#fff;filter:drop-shadow(0 0 5px rgba(0,198,255,.7));animation:_ngcontent-%COMP%_barcoAnim .6s ease-out}@keyframes _ngcontent-%COMP%_barcoAnim{0%{transform:scale(0) rotate(-20deg);opacity:0}to{transform:scale(1) rotate(0);opacity:1}}.info[_ngcontent-%COMP%]{margin-top:2rem;text-align:center;font-size:1.2rem;font-weight:700;text-shadow:0 0 10px rgba(0,198,255,.7)}.juego[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{align-self:center;background:#00ffae;color:#000;padding:.6rem 1.4rem;border-radius:.6rem;border:none;font-weight:700;cursor:pointer;transition:background .3s ease,transform .2s ease}.juego[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:#00c68a;transform:scale(1.05)}']})};export{A as BatallaNavalComponent};
