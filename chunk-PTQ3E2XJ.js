import{b as P,c as i,d as R,e as k,h as S,k as j,l as I,t as O,v as N}from"./chunk-GN3DSZMQ.js";import{d as y,e as F,g as w}from"./chunk-IUAF4EHQ.js";import"./chunk-NSFHJ6NV.js";import{a as M}from"./chunk-2QAIXTRJ.js";import{$a as C,Bb as _,Ca as g,Db as x,Ga as u,Na as c,Pa as n,Qa as s,Ra as h,Va as b,Wa as v,_a as m,ta as a,xa as p}from"./chunk-4LKR36O3.js";import"./chunk-LJ5XHLMQ.js";import{h as f}from"./chunk-FK42CRUA.js";function G(o,t){o&1&&(n(0,"div",11),m(1," Las contrase\xF1as no coinciden. "),s())}function q(o,t){if(o&1&&(n(0,"p",12),m(1),s()),o&2){let e=v();a(),C(e.mensaje)}}var E=class o{constructor(t,e,r){this.fb=t;this.auth=e;this.router=r;this.registroForm=this.fb.group({username:["",i.required],email:["",[i.required,i.email]],password:["",[i.required,i.minLength(6)]],confirmPassword:["",i.required]},{validators:this.passwordsIguales})}registroForm;mensaje="";passwordsIguales(t){let e=t.get("password")?.value,r=t.get("confirmPassword")?.value;return e===r?null:{noCoinciden:!0}}onRegistro(){return f(this,null,function*(){if(this.registroForm.valid){let{username:t,email:e,password:r}=this.registroForm.value;try{let{data:l,error:d}=yield this.auth.register(e,r,t);if(d){console.error("Error al registrar:",d.message),d.message.includes("User already registered")?this.mensaje="Este correo ya est\xE1 registrado. Por favor, us\xE1 otro.":this.mensaje="Hubo un problema: "+d.message;return}console.log("Usuario registrado:",l),this.registroForm.reset(),this.router.navigate(["/home"])}catch(l){console.error("Error inesperado:",l),this.mensaje="Error inesperado al registrar."}}else this.mensaje="Verific\xE1 que todos los campos est\xE9n bien completados."})}static \u0275fac=function(e){return new(e||o)(p(O),p(M),p(y))};static \u0275cmp=g({type:o,selectors:[["app-registro"]],decls:15,vars:4,consts:[[1,"auth-container"],[1,"auth-card"],[3,"ngSubmit","formGroup"],["type","text","placeholder","Nombre de usuario","formControlName","username"],["type","email","placeholder","Email","formControlName","email"],["type","password","placeholder","Contrase\xF1a","formControlName","password"],["type","password","placeholder","Repetir contrase\xF1a","formControlName","confirmPassword"],["class","error",4,"ngIf"],["type","submit",3,"disabled"],["class","mensaje",4,"ngIf"],["routerLink","/login",1,"link"],[1,"error"],[1,"mensaje"]],template:function(e,r){e&1&&(n(0,"div",0)(1,"div",1)(2,"h2"),m(3,"Registro"),s(),n(4,"form",2),b("ngSubmit",function(){return r.onRegistro()}),h(5,"input",3)(6,"input",4)(7,"input",5)(8,"input",6),u(9,G,2,0,"div",7),n(10,"button",8),m(11,"Registrarse"),s()(),u(12,q,2,1,"p",9),n(13,"a",10),m(14,"Inici\xE1 sesi\xF3n"),s()()()),e&2&&(a(4),c("formGroup",r.registroForm),a(5),c("ngIf",r.registroForm.hasError("noCoinciden")&&r.registroForm.touched),a(),c("disabled",r.registroForm.invalid),a(2),c("ngIf",r.mensaje))},dependencies:[x,_,N,S,P,R,k,j,I,w,F],styles:[".auth-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:100vh;background:linear-gradient(135deg,#0f2027,#203a43,#2c5364);font-family:Segoe UI,sans-serif}.auth-card[_ngcontent-%COMP%]{background:#ffffff1a;padding:2rem;border-radius:1rem;box-shadow:0 0 20px #0006;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);width:100%;max-width:400px;color:#fff}.auth-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;margin-bottom:1.5rem}form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}input[_ngcontent-%COMP%]{padding:.8rem;border-radius:.5rem;border:none;outline:none;font-size:1rem;transition:all .3s ease}input[_ngcontent-%COMP%]:focus{border:2px solid #00c6ff;background:#ffffffe6;color:#000}button[_ngcontent-%COMP%]{padding:.8rem;border:none;border-radius:.5rem;background:#00c6ff;color:#fff;font-size:1rem;cursor:pointer;transition:background .3s ease}button[_ngcontent-%COMP%]:hover{background:#0072ff}button[_ngcontent-%COMP%]:disabled{background:#aaa;cursor:not-allowed}.mensaje[_ngcontent-%COMP%]{margin-top:1rem;text-align:center;font-weight:700;color:#fffa}.link[_ngcontent-%COMP%]{display:block;margin-top:1rem;text-align:center;color:#ccc;text-decoration:underline;cursor:pointer}.link[_ngcontent-%COMP%]:hover{color:#fff}.error[_ngcontent-%COMP%]{color:#ff4d4f;font-size:.9em;margin-top:5px}"]})};export{E as RegistroComponent};
